$(document).on("touchstart",".phone-li.leaderboards",function(t){$("#left-sidebar").hasClass("show")?$("#left-sidebar").removeClass("show"):$("#left-sidebar").addClass("show")}),$(document).on("focus",".event-bet-input",function(){$(this).addClass("selected")}),$(document).on("blur",".event-bet-input",function(){$(this).removeClass("selected")}),$(document).on("touchstart",".phone-li.userinfo",function(t){$("#right-sidebar").hasClass("show")?$("#right-sidebar").removeClass("show"):$("#right-sidebar").addClass("show")}),$(document).on("click",".opacity.closed",function(t){t.preventDefault(),$("#attentionBox").text("Betting for this event has closed").css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)}),$(document).on("click",".navlink.availablebets",function(){$(".navlink").removeClass("selected"),$(this).addClass("selected"),$(".secondsection").hide(),$(".firstsection").show()}),$(document).on("click",".navlink.placedbets",function(){$(".navlink").removeClass("selected"),$(this).addClass("selected"),$(".firstsection").hide(),$(".secondsection").show()}),$(document).on("click",".event-bet-option",function(t){if($(".chosen").removeClass("chosen"),$(this).hasClass("opacity"))$("#attentionBox").text("You can't bet twice on the same stuff!").css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3);else{var e=$(this).find(".event-bet-odds").text(),s=$(this).attr("data-bet-title");console.log(e),console.log(s),$(this).hasClass("chosen")||($(this).closest(".event-bet").find(".bet-actions").show(),$(this).addClass("chosen"))}}),$(document).on("click",".cancelbet",function(){$(this).closest(".event-bet").find(".chosen").find(".bet-title").show(),$(this).closest(".event-bet").find(".chosen").find(".event-bet-input").hide(),$(this).closest(".event-bet").find(".bet-actions").hide(),$(this).closest(".event-bet").find(".chosen").removeClass("chosen")}),$(document).on("click",".placebet",function(){$(this).closest(".bet-actions").find(".fa-gavel").hide(),$(this).closest(".bet-actions").find(".fa-circle-o-notch").show();var t=$(this),e=$(this).closest(".bet-actions").find(".event-bet-input").val(),s=$(this).closest(".event-bet").find(".chosen").attr("data-betling-id"),o=$(this).closest(".event-bet").find(".chosen").attr("data-bet-id"),n=$(this).closest(".event-bet").find(".chosen").find(".event-bet-odds").text(),a=$(".currentUserBalance"),i=a.css("color"),l=parseFloat(a.text()),c=l-e,d=$(".current-xp"),r=d.css("color"),p=parseFloat(d.text()),b=$(".count-inner"),h=parseFloat(b.text()),u=$(".needed-xp"),m=parseFloat(u.text()),f=p+5,v=f/m*100;console.log(e),console.log(n),console.log(o),console.log(s),0==e?$("#attentionBox").text("You can't bet 0 coins").css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3):c>=0?$.ajax({type:"POST",url:"/createBet",data:{stake:e,odds:n,betId:o,betlingId:s},success:function(e){$(this).closest(".bet-actions").find(".fa-gavel").show(),$(this).closest(".bet-actions").find(".fa-circle-o-notch").hide(),"true"==e?(console.log("success"),t.closest(".event-bet").find(".bet-actions").hide(),t.closest(".event-bet").find(".chosen").addClass("opacity"),t.closest(".event-bet").find(".chosen").removeClass("chosen"),a.css("color","red"),setTimeout(function(){a.css("color",i)},3e3),$.isNumeric(h)&&$(".count-inner").text(h+1),$(".currentUserBalance").text(c),$(".current-xp").text(f),$(".profile-xp").animate({width:v+"%"}),$("#profile-new-xp").text("+ "+f+" xp").fadeIn(500).delay(2e3).fadeOut(500),$("#attentionBox").text("Bet Placed!").css("background-color","#81C784").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3),f>=m&&$.ajax({type:"POST",url:"/levelUp",data:{i:1},success:function(t){var e=jQuery.parseJSON(t);console.log(e.level),$(".profile-level").text("Level "+e.level),$(".needed-xp").text(e.xp_limit),$("#current-bet-limit").text(e.bet_limit);var s=parseFloat(e.xp_limit),o=f/s*100;$(".profile-xp").animate({width:o+"%"}),$("#attentionBox").text("LEVEL UP!").css("background-color","#81C784").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)}},"json")):$("#attentionBox").text(e).css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)}},"json"):$("#attentionBox").text("You need more coins!").css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)}),$(document).on("keyup",".event-bet-input",function(){$(".inUse").removeClass("inUse"),$(this).addClass("inUse");var t=$("#current-bet-limit"),e=parseFloat(this.value),s=t.text();e>s?($(this).css("color","red"),$("#attentionBox").text("Watch your bet limit!").css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)):$(this).css("color","#555"),console.log(s)}),$(document).on("click",".addtobetslip",function(){var t=$(this).find(".event-bet-odds").text(),e=$(this).attr("data-bet-title"),s='<form method="POST" action="" accept-charset="UTF-8" data-async="data-async" name="add_to_betslip"> <input placeholder="Your stake" class="betslip-input" name="stake" type="text"> <button type="submit" class="betslip-submit"> <i class="fa fa-gavel"></i> </button> </form>';console.log(t),console.log(e),$(this).toggleClass($(this).hasClass("chosen")?"chosen":"chosen"),$(".betslip-ul").append('<span class="betslip-li-wrap"> <li class ="betslip-li"> <span class="betslip-title">Manchester wins</span> <span class="remove-from-betslip"><i class="fa fa-times"></i></span><br/> <span class="to-win">To Win: <span class="reward"> enter a stake</span> </span><span class ="betslip-odds">14/1</span> </li> <div class="betslip-stake"> '+s+"</div> </span>")}),$(document).on("click",".remove-from-betslip",function(){$(this).closest(".betslip-li-wrap").hide(),$(".event-bet-option").removeClass("chosen")}),$(".betslip-ul").on("keyup",".betslip-input",function(){$(".inUse").removeClass("inUse"),$(this).addClass("inUse");var t="",e=parseFloat(this.value),s=parseFloat($(this).parents(".betslip-li-wrap").find(".betslip-odds").text());e>50?($(this).css("color","red"),$(".betslip-totalstake").html("Check your bet limit!")):($(this).css("color","#555"),$(".betslip-totalstake").html("Total Stake : "+e+" coins")),t=e*s,console.log(e),console.log(s),console.log(t),$(this).parents(".betslip-li-wrap").find(".reward").text(t),0===$(this).val().length&&($(".betslip-totalstake").html("No stake... again"),$(this).parents(".betslip-li-wrap").find(".reward").text("enter a stake"))}),$(document).on("submit","form[data-async]",function(t){var e=$(this),s=e.find('input[name="_method"]').val()||"POST",o=e.prop("action"),n=e.find('input[name="stake"]').val();n>50?$(".betslip-totalstake").html("Lower your stake"):$.ajax({type:s,url:o,data:e.serialize(),success:function(){$(e).closest(".betslip-li-wrap").find(".betslip-stake").hide()}}),t.preventDefault()});
$(document).on("click",".event-bet-option",function(){var t=$(this).find(".event-bet-odds").text(),e=$(this).attr("data-bet-title");$(this).find(".bet-title").hide(),$(this).find(".event-bet-input").show(),console.log(t),console.log(e),$(this).hasClass("chosen")||($(this).closest(".event-bet").find(".bet-actions").show(),$(this).addClass("chosen"))}),$(document).on("click",".cancelbet",function(){$(this).closest(".event-bet").find(".chosen").find(".bet-title").show(),$(this).closest(".event-bet").find(".chosen").find(".event-bet-input").hide(),$(this).closest(".event-bet").find(".bet-actions").hide(),$(this).closest(".event-bet").find(".chosen").removeClass("chosen")}),$(document).on("click",".placebet",function(){var t=$(this),e=$(this).closest(".event-bet").find(".chosen").find(".event-bet-input").val(),s=$(this).closest(".event-bet").find(".chosen").find(".event-bet-input").attr("data-betling-id"),n=$(this).closest(".event-bet").find(".chosen").find(".event-bet-input").attr("data-bet-id"),i=$(this).closest(".event-bet").find(".chosen").find(".event-bet-odds").text(),o=$(".currentUserBalance"),a=o.css("color"),l=parseFloat(o.text()),c=l-e,d=$(".current-xp"),p=d.css("color"),r=parseFloat(d.text()),b=r+5;console.log(i),c>=0?$.ajax({type:"POST",url:"/createBet",data:{stake:e,odds:i,betId:n,betlingId:s},success:function(e){console.log("success"),t.closest(".event-bet").find(".chosen").find(".bet-title").show(),t.closest(".event-bet").find(".chosen").find(".event-bet-input").hide(),t.closest(".event-bet").find(".bet-actions").hide(),t.closest(".event-bet").find(".chosen").removeClass("chosen"),o.css("color","red"),setTimeout(function(){o.css("color",a)},3e3),$(".currentUserBalance").text(c),$(".current-xp").text(b),$("#profile-new-xp").text("+ "+b+" xp").fadeIn(500).delay(2e3).fadeOut(500),$("#attentionBox").text("Bet Placed!").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)}},"json"):$("#attentionBox").text("You need more coins!").css("background-color","#ef5350").animate({bottom:"0px"},1e3).delay(2500).animate({bottom:"-200px"},1e3)}),$(document).on("click",".addtobetslip",function(){var t=$(this).find(".event-bet-odds").text(),e=$(this).attr("data-bet-title"),s='<form method="POST" action="" accept-charset="UTF-8" data-async="data-async" name="add_to_betslip"> <input placeholder="Your stake" class="betslip-input" name="stake" type="text"> <button type="submit" class="betslip-submit"> <i class="fa fa-gavel"></i> </button> </form>';console.log(t),console.log(e),$(this).toggleClass($(this).hasClass("chosen")?"chosen":"chosen"),$(".betslip-ul").append('<span class="betslip-li-wrap"> <li class ="betslip-li"> <span class="betslip-title">Manchester wins</span> <span class="remove-from-betslip"><i class="fa fa-times"></i></span><br/> <span class="to-win">To Win: <span class="reward"> enter a stake</span> </span><span class ="betslip-odds">14/1</span> </li> <div class="betslip-stake"> '+s+"</div> </span>")}),$(document).on("click",".remove-from-betslip",function(){$(this).closest(".betslip-li-wrap").hide(),$(".event-bet-option").removeClass("chosen")}),$(".betslip-ul").on("keyup",".betslip-input",function(){$(".inUse").removeClass("inUse"),$(this).addClass("inUse");var t="",e=parseFloat(this.value),s=parseFloat($(this).parents(".betslip-li-wrap").find(".betslip-odds").text());e>50?($(this).css("color","red"),$(".betslip-totalstake").html("Check your bet limit!")):($(this).css("color","#555"),$(".betslip-totalstake").html("Total Stake : "+e+" coins")),t=e*s,console.log(e),console.log(s),console.log(t),$(this).parents(".betslip-li-wrap").find(".reward").text(t),0===$(this).val().length&&($(".betslip-totalstake").html("No stake... again"),$(this).parents(".betslip-li-wrap").find(".reward").text("enter a stake"))}),$(document).on("submit","form[data-async]",function(t){var e=$(this),s=e.find('input[name="_method"]').val()||"POST",n=e.prop("action"),i=e.find('input[name="stake"]').val();i>50?$(".betslip-totalstake").html("Lower your stake"):$.ajax({type:s,url:n,data:e.serialize(),success:function(){$(e).closest(".betslip-li-wrap").find(".betslip-stake").hide()}}),t.preventDefault()});